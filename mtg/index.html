<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jumpstart Theme Card Builder â€” jamiekrueger.dev</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Open+Sans:wght@400;700&family=Barlow+Semi+Condensed:wght@600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <nav class="nav">
        <a href="/">&lt; Home</a>
        <h1>Jumpstart Theme Card Builder</h1>
    </nav>

    <div class="app-layout">
    <main class="app">
        <input
            id="theme-name"
            class="theme-name-shared"
            type="text"
            placeholder="THEME NAME"
            spellcheck="false"
            autocomplete="off"
        >
        <div class="card-columns">

            <!-- Packing List -->
            <div class="card-column">
                <div class="packing-edit-card" id="packing-edit">
                    <div class="packing-edit-inner">
                        <textarea
                            id="decklist"
                            class="packing-edit-decklist"
                            placeholder="Paste a decklist, one card per line.&#10;e.g.&#10;1x Lightning Bolt&#10;2 Counterspell&#10;Llanowar Elves&#10;4 Forest"
                            spellcheck="false"
                        ></textarea>
                        <button id="generate-btn" class="btn packing-edit-btn" type="button">Generate</button>
                    </div>
                </div>
                <div id="packing-view" class="packing-view hidden">
                    <div class="packing-card-wrap">
                        <canvas id="packing-canvas" class="output-canvas" width="745" height="1040"></canvas>
                        <button id="packing-edit-btn" class="card-edit-icon" type="button" title="Edit decklist">&#x270E;</button>
                    </div>
                    <div class="card-panel">
                        <label class="sheet-checkbox">
                            <input id="packing-show-title" type="checkbox" checked>
                            Show title
                        </label>
                        <div class="download-row">
                            <a id="packing-download" class="btn btn-download" download="packing-list.png">Download PNG</a>
                            <button id="packing-sheet-btn" class="btn" type="button">Add to Sheet</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Theme Card -->
            <div class="card-column">
                <div class="card-slot" id="theme-slot">
                    <div class="card-slot-inner">
                        <div id="upload-zone" class="upload-zone">
                            <span class="upload-icon">&#x1F5BC;</span>
                            <span class="upload-label">Drop image here<br>or click to upload</span>
                            <input id="file-input" type="file" accept="image/*">
                        </div>
                        <div id="crop-area" class="hidden">
                            <div id="crop-viewport" class="crop-viewport">
                                <img id="crop-img" alt="">
                            </div>
                        </div>
                        <div class="theme-overlay hidden" id="theme-overlay">
                            <div class="theme-overlay-name" id="theme-overlay-name"></div>
                            <div class="theme-overlay-gradient">
                                <div class="theme-overlay-colors" id="theme-overlay-colors"></div>
                            </div>
                        </div>
                    </div>
                    <button id="change-image-btn" class="card-edit-icon hidden" type="button" title="Change image">&#x270E;</button>
                </div>
                <div class="card-panel hidden" id="theme-panel">
                    <div class="card-controls" id="theme-controls">
                        <label for="zoom-slider">Zoom:</label>
                        <input id="zoom-slider" class="zoom-slider" type="range" min="0" max="100" value="0">
                    </div>
                    <div class="color-picker-section">
                        <label class="color-picker-label">Color identity:</label>
                        <div class="color-picker">
                            <button class="color-toggle" data-color="W" type="button" title="White">
                                <img src="/mtg/symbols/W.svg" alt="White">
                            </button>
                            <button class="color-toggle" data-color="U" type="button" title="Blue">
                                <img src="/mtg/symbols/U.svg" alt="Blue">
                            </button>
                            <button class="color-toggle" data-color="B" type="button" title="Black">
                                <img src="/mtg/symbols/B.svg" alt="Black">
                            </button>
                            <button class="color-toggle" data-color="R" type="button" title="Red">
                                <img src="/mtg/symbols/R.svg" alt="Red">
                            </button>
                            <button class="color-toggle" data-color="G" type="button" title="Green">
                                <img src="/mtg/symbols/G.svg" alt="Green">
                            </button>
                        </div>
                    </div>
                    <div class="download-row" id="theme-download-row">
                        <a id="theme-download" class="btn btn-download" download="theme-card.png">Download PNG</a>
                        <button id="theme-sheet-btn" class="btn" type="button">Add to Sheet</button>
                    </div>
                </div>
                <canvas id="theme-canvas" class="hidden" width="745" height="1040"></canvas>
            </div>

        </div>
        <button id="pair-sheet-btn" class="btn hidden" type="button">Add Pair to Sheet</button>
    </main>
    <div id="growl-container" class="growl-container" aria-live="polite"></div>

    <aside id="sheet-panel" class="sheet-panel">
        <button class="sheet-toggle-btn" id="sheet-toggle" type="button" title="Print Sheet">
            <span class="sheet-toggle-chevron">&#x276E;</span><span class="sheet-toggle-close">&#x2715;</span>&#x1F5B6;<span id="sheet-count" class="sheet-count">(0)</span>
        </button>
        <div class="sheet-body">
            <div class="sheet-header">
                <span class="sheet-header-icon">&#x1F5B6;</span>
                Print Sheet
                <button class="sheet-header-close" id="sheet-close" type="button" title="Close">&#x2715;</button>
            </div>
            <div id="sheet-slots" class="sheet-slots"></div>
            <div class="sheet-controls">
                <div class="sheet-controls-row">
                    <label class="sheet-label">
                        Paper
                        <select id="sheet-paper">
                            <option value="letter" selected>Letter</option>
                            <option value="a4">A4</option>
                        </select>
                    </label>
                </div>
                <div class="sheet-controls-row">
                    <label class="sheet-checkbox">
                        <input id="sheet-cropmarks" type="checkbox">
                        Crop marks
                    </label>
                </div>
                <div class="sheet-controls-row">
                    <label class="sheet-checkbox">
                        <input id="sheet-double" type="checkbox">
                        Double-sided
                    </label>
                </div>
                <div class="sheet-double-options" id="sheet-offset-row" style="display:none">
                    <label class="sheet-label">
                        Back offset
                        <span class="help-icon" tabindex="0" aria-label="What is back offset?">?<span class="help-tooltip">Shifts the back page up or down to align with the front when duplex printing. Adjust if your printer's double-sided output is slightly misaligned.</span></span>
                        <input id="sheet-back-offset" type="number" class="sheet-number-input" value="0" step="0.5"> mm
                    </label>
                    <button id="sheet-test-btn" class="btn sheet-btn" type="button">Download Test Page</button>
                </div>
                <div class="sheet-controls-row">
                    <button id="sheet-generate" class="btn sheet-btn" type="button" disabled>Generate PDF</button>
                    <button id="sheet-clear" class="btn sheet-btn" type="button" disabled>Clear All</button>
                </div>
            </div>
        </div>
    </aside>
    </div>

    <script type="module" src="js/app.js"></script>
</body>
</html>
